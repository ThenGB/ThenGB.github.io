/* =================================================================== */
/* 1. FONT, VARIABEL & GAYA DASAR
/* =================================================================== */
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200');

:root {
  /* Palet Warna Diperluas */
  --accent-biru: #1976d2; --accent-biru-dark: #0d47a1;
  --accent-merah: #d32f2f; --accent-merah-dark: #b71c1c;
  --accent-hijau: #388e3c; --accent-hijau-dark: #1b5e20;
  --accent-kuning: #fbc02d; --accent-kuning-dark: #f57c00;
  --accent-ungu: #7b1fa2; --accent-ungu-dark: #4a148c;
  --accent-pink: #c2185b; --accent-pink-dark: #880e4f;
  --accent-birutua: #0288d1; --accent-birutua-dark: #01579b;
  --accent-teal: #00796b; --accent-teal-dark: #004d40;
  --accent-oranye: #f57c00; --accent-oranye-dark: #e65100;
  --accent-coklat: #5d4037; --accent-coklat-dark: #3e2723;
  --accent-abu: #616161; --accent-abu-dark: #212121;
  --accent-indigo: #303f9f; --accent-indigo-dark: #1a237e;
  --accent-cyan: #0097a7; --accent-cyan-dark: #006064;
  --accent-lime: #afb42b; --accent-lime-dark: #827717;
  --accent-deep-orange: #e64a19; --accent-deep-orange-dark: #bf360c;

  /* Variabel UI */
  --border-radius-sm: 8px;
  --border-radius-md: 16px;
  --border-radius-lg: 28px;
  --shadow-1: 0 1px 2px rgba(0,0,0,0.08), 0 1px 3px rgba(0,0,0,0.05);
  --shadow-2: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1);
  --shadow-3: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -4px rgba(0,0,0,0.1);
}

html {
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
  font-synthesis: none;
}

html, body {
  height: 100vh;
  height: 100svh;
  overflow: hidden;
  margin: 0;
  padding: 0;
  width: 100%;
  font-family: 'Roboto', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-tap-highlight-color: transparent;
}

body {
  display: flex;
  flex-direction: column;
  overscroll-behavior: none;
  transition: background-color 0.4s, color 0.4s;
}

body.viewer-active {
  overflow: hidden;
}

.app-header, .bottom-nav, #search-container, .app-content, .pdf-viewer-overlay {
  transform: translateZ(0);
}

/* Scrollbar Bertema */
body {
  scrollbar-color: var(--primary) transparent;
  scrollbar-width: thin;
}
body::-webkit-scrollbar { width: 6px; }
body::-webkit-scrollbar-track { background: transparent; }
body::-webkit-scrollbar-thumb { background-color: var(--primary); border-radius: 3px; }
.app-content::-webkit-scrollbar { width: 6px; }
.app-content::-webkit-scrollbar-track { background: transparent; }
.app-content::-webkit-scrollbar-thumb { background-color: var(--primary); border-radius: 3px; }
.pdf-viewer-content::-webkit-scrollbar { width: 8px; }
.pdf-viewer-content::-webkit-scrollbar-track { background: transparent; }
.pdf-viewer-content::-webkit-scrollbar-thumb { background-color: var(--primary); border-radius: 4px; }


/* =================================================================== */
/* 2. TEMA & WARNA AKSEN
/* =================================================================== */
body {
  --primary: var(--accent, var(--accent-biru));
  --primary-dark: var(--accent-dark, var(--accent-biru-dark));
  --text-primary: #1f1f1f;
  --text-secondary: #5f5f5f;
  --text-on-primary: #ffffff;
  --surface-1: #f3f6fc;
  --surface-2: #ffffff;
  --outline: #d0d5dd;
  --state-layer: color-mix(in srgb, var(--primary) 8%, transparent);
}

body.dark-theme {
  --text-primary: #e3e3e3;
  --text-secondary: #a0a0a0;
  --surface-1: #121212;
  --surface-2: #1e1e1e;
  --outline: #44474a;
  --state-layer: color-mix(in srgb, var(--primary) 15%, transparent);
}

body {
  background-color: var(--surface-1);
  color: var(--text-primary);
}
.app-header { background-color: var(--primary); color: var(--text-on-primary); }
.bottom-nav, .pujian-list li, .settings-panel, #search-container {
  background-color: var(--surface-2);
}
.pdf-viewer-overlay { background-color: var(--surface-1); }
.pdf-viewer-header { background-color: var(--primary) !important; color: var(--text-on-primary); }
.pdf-viewer-content { background-color: var(--surface-1); }

body[data-accent="biru"] { --accent: var(--accent-biru); --accent-dark: var(--accent-biru-dark); }
body[data-accent="merah"] { --accent: var(--accent-merah); --accent-dark: var(--accent-merah-dark); }
body[data-accent="hijau"] { --accent: var(--accent-hijau); --accent-dark: var(--accent-hijau-dark); }
body[data-accent="kuning"] { --accent: var(--accent-kuning); --accent-dark: var(--accent-kuning-dark); }
body[data-accent="ungu"] { --accent: var(--accent-ungu); --accent-dark: var(--accent-ungu-dark); }
body[data-accent="pink"] { --accent: var(--accent-pink); --accent-dark: var(--accent-pink-dark); }
body[data-accent="birutua"] { --accent: var(--accent-birutua); --accent-dark: var(--accent-birutua-dark); }
body[data-accent="teal"] { --accent: var(--accent-teal); --accent-dark: var(--accent-teal-dark); }
body[data-accent="oranye"] { --accent: var(--accent-oranye); --accent-dark: var(--accent-oranye-dark); }
body[data-accent="coklat"] { --accent: var(--accent-coklat); --accent-dark: var(--accent-coklat-dark); }
body[data-accent="abu"] { --accent: var(--accent-abu); --accent-dark: var(--accent-abu-dark); }
body[data-accent="indigo"] { --accent: var(--accent-indigo); --accent-dark: var(--accent-indigo-dark); }
body[data-accent="cyan"] { --accent: var(--accent-cyan); --accent-dark: var(--accent-cyan-dark); }
body[data-accent="lime"] { --accent: var(--accent-lime); --accent-dark: var(--accent-lime-dark); }
body[data-accent="deep-orange"] { --accent: var(--accent-deep-orange); --accent-dark: var(--accent-deep-orange-dark); }

/* =================================================================== */
/* 3. KOMPONEN LAYOUT
/* =================================================================== */
.app-header {
  position: fixed; top: 0; left: 0; width: 100%;
  padding: 1rem 1.5rem; font-size: 1.375rem; font-weight: 500;
  z-index: 100; box-sizing: border-box;
  box-shadow: var(--shadow-2);
}
.app-content {
  position: fixed; top: 61px; bottom: 80px; left: 0; right: 0;
  overflow-y: auto; padding: 88px 1rem 1rem; box-sizing: border-box;
}
.bottom-nav {
  position: fixed; bottom: 0; left: 0; width: 100%; height: 80px;
  display: flex; justify-content: space-around; align-items: center;
  border-top: 1px solid var(--outline); z-index: 100;
}

/* =================================================================== */
/* 4. PDF VIEWER (FULL PAGE OVERLAY)
/* =================================================================== */
.pdf-viewer-overlay {
  position: fixed; inset: 0; z-index: 200;
  display: flex; flex-direction: column;
  transform: translateX(100%);
  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}
body.viewer-active .pdf-viewer-overlay { transform: translateX(0); }
.pdf-viewer-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
  padding: 0.5rem;
  flex-shrink: 0;
  box-shadow: var(--shadow-2);
}
.song-navigation {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    overflow: hidden;
}
.song-title-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    overflow: hidden;
    max-width: calc(100vw - 280px); /* Lebar maksimum agar tidak tumpang tindih */
}
.song-navigation h2 {
  margin: 0; font-size: 1.125rem; font-weight: 500;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  text-align: center;
}
#pdf-viewer-number {
    font-size: 0.75rem;
    opacity: 0.8;
}
.pdf-viewer-controls {
  display: flex; align-items: center; gap: 0.25rem;
  margin-left: auto; /* Dorong ke kanan */
}
.pdf-viewer-header button {
  color: var(--text-on-primary);
  opacity: 0.9;
  transition: background-color 0.2s, color 0.2s, opacity 0.2s;
}
.pdf-viewer-header button:hover {
  background-color: rgba(255,255,255,0.15);
  opacity: 1;
}
.pdf-viewer-header button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  background-color: transparent;
}
.page-navigation { display: flex; align-items: center; }
.page-indicator {
  font-size: 0.9rem; font-weight: 500;
  padding: 0 0.25rem; min-width: 50px; text-align: center;
}
.pdf-viewer-content {
  position: relative; flex-grow: 1; overflow: auto;
  text-align: center; padding: 1rem 0;
}
.canvas-wrapper {
  display: flex;
  justify-content: center;
  gap: 1rem;
  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s;
}
.canvas-wrapper.vertical-scroll {
    flex-direction: column;
    align-items: center;
}
.canvas-wrapper.is-navigating {
  transform: scale(0.95);
  opacity: 0;
}
.canvas-wrapper canvas {
  max-width: 100%; height: auto;
  box-shadow: var(--shadow-3);
  transition: transform 0.3s ease-in-out;
}
.loader {
  position: absolute; top: 50%; left: 50%; width: 40px; height: 40px;
  border: 4px solid var(--outline); border-top: 4px solid var(--primary);
  border-radius: 50%; animation: spin 1s linear infinite;
  transform: translate(-50%, -50%); display: none;
}
@keyframes spin {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  100% { transform: translate(-50%, -50%) rotate(360deg); }
}
.orientation-warning {
    position: absolute;
    inset: 0;
    background-color: rgba(0,0,0,0.7);
    color: white;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    z-index: 10;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s;
}
.orientation-warning.visible {
    opacity: 1;
    visibility: visible;
}
.orientation-warning .material-symbols-outlined {
    font-size: 4rem;
    margin-bottom: 1rem;
    animation: rotate-anim 2s infinite linear;
}
@keyframes rotate-anim {
    from { transform: rotate(0deg); }
    to { transform: rotate(90deg); }
}

/* =================================================================== */
/* 5. KOMPONEN UI LAINNYA
/* =================================================================== */
#search-container {
  position: fixed; top: 85px; left: 1rem; right: 1rem; z-index: 50;
  display: flex; align-items: center; gap: 0.75rem;
  padding: 0.25rem 0.5rem 0.25rem 1rem; border-radius: var(--border-radius-lg);
  border: 1px solid var(--outline); box-shadow: var(--shadow-1);
  transition: border-color 0.2s, box-shadow 0.2s;
}
#search-container:focus-within { border-color: var(--primary); box-shadow: var(--shadow-2); }
.search-icon { color: var(--text-secondary); font-size: 1.5rem; }
#search-input {
  flex-grow: 1; width: 100%; border: none; outline: none;
  font-size: 1rem; font-family: inherit;
  background: transparent; color: var(--text-primary); padding: 0.75rem 0;
}
#search-input::placeholder { color: var(--text-secondary); opacity: 1; }
#clear-search {
  background: none; border: none; outline: none; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  width: 44px; height: 44px; color: var(--text-secondary);
  border-radius: 50%; transition: background-color 0.2s;
}
#clear-search:hover { background-color: var(--state-layer); }
.nav-btn {
  position: relative; display: flex; flex-direction: column; align-items: center;
  justify-content: center; gap: 4px; background: none; border: none;
  outline: none; cursor: pointer; font-family: inherit; font-size: 0.75rem;
  font-weight: 500; color: var(--text-secondary); width: 80px; height: 100%;
  border-radius: var(--border-radius-md); transition: color 0.2s; overflow: hidden;
}
.nav-btn .material-symbols-outlined { font-size: 1.75rem; }
.nav-btn::before {
  content: ''; position: absolute; inset: 0;
  background-color: var(--primary); opacity: 0; transition: opacity 0.2s;
}
.nav-btn:hover::before { opacity: 0.08; }
.nav-btn:active::before { opacity: 0.12; }
.nav-btn.selected { color: var(--primary); }
.nav-btn.selected .material-symbols-outlined { font-variation-settings: 'FILL' 1; }
.pujian-list { list-style: none; padding: 0; margin: 0 auto; max-width: 700px; }
.pujian-list li {
  position: relative; display: flex; align-items: center; gap: 1rem;
  padding: 1rem 1.25rem; margin-bottom: 0.75rem; border-radius: var(--border-radius-md);
  box-shadow: var(--shadow-1); overflow: hidden;
  transition: transform 0.2s, box-shadow 0.2s; cursor: pointer;
}
.pujian-list li:hover { transform: translateY(-2px); box-shadow: var(--shadow-2); }
.pujian-list li::before {
  content: ''; position: absolute; inset: 0;
  background-color: var(--primary); opacity: 0; transition: opacity 0.2s;
}
.pujian-list li:hover::before { opacity: 0.05; }
.pujian-nomor {
  flex-shrink: 0; width: 3em; height: 3em;
  display: flex; align-items: center; justify-content: center;
  border-radius: 50%; color: var(--text-on-primary); font-weight: 700;
  font-size: 1rem; background-color: var(--primary);
}
.pujian-list li a {
  text-decoration: none; font-weight: 500; font-size: 1rem;
  color: var(--text-primary); pointer-events: none;
}
.settings-panel {
  max-width: 700px; margin: 0 auto; padding: 1rem;
  border-radius: var(--border-radius-md); box-shadow: var(--shadow-1);
}
.settings-panel h2 { margin: 0 0 1.5rem 0.5rem; font-size: 1.25rem; color: var(--primary); }
.setting-item {
  display: flex; align-items: center; justify-content: space-between;
  padding: 1rem 0.5rem; min-height: 56px;
}
label.setting-item { cursor: pointer; }
.setting-item + .setting-item { border-top: 1px solid var(--outline); }
.setting-item label { font-size: 1rem; font-weight: 500; }
.accent-palette {
  display: flex; gap: 0.75rem; flex-wrap: wrap;
  justify-content: flex-end; max-width: 50%;
}
.accent-color {
  position: relative; width: 36px; height: 36px;
  border-radius: 50%; border: 2px solid var(--outline);
  cursor: pointer; transition: border-color 0.2s;
}
.accent-color::after {
  content: 'check'; font-family: 'Material Symbols Outlined'; font-weight: normal;
  font-style: normal; font-size: 24px; line-height: 1; letter-spacing: normal;
  text-transform: none; display: inline-block; white-space: nowrap;
  word-wrap: normal; direction: ltr; -webkit-font-feature-settings: 'liga';
  -webkit-font-smoothing: antialiased; position: absolute; top: 50%; left: 50%;
  transform: translate(-50%, -50%); color: #fff;
  text-shadow: 0 0 3px rgba(0,0,0,0.5); opacity: 0; transition: opacity 0.2s;
}
.accent-color.selected { border-color: var(--primary); }
.accent-color.selected::after { opacity: 1; }
/* --- FIX: Aturan warna yang hilang ditambahkan kembali --- */
.accent-color[data-color="biru"] { background-color: var(--accent-biru); }
.accent-color[data-color="merah"] { background-color: var(--accent-merah); }
.accent-color[data-color="hijau"] { background-color: var(--accent-hijau); }
.accent-color[data-color="kuning"] { background-color: var(--accent-kuning); }
.accent-color[data-color="ungu"] { background-color: var(--accent-ungu); }
.accent-color[data-color="pink"] { background-color: var(--accent-pink); }
.accent-color[data-color="birutua"] { background-color: var(--accent-birutua); }
.accent-color[data-color="teal"] { background-color: var(--accent-teal); }
.accent-color[data-color="oranye"] { background-color: var(--accent-oranye); }
.accent-color[data-color="coklat"] { background-color: var(--accent-coklat); }
.accent-color[data-color="abu"] { background-color: var(--accent-abu); }
.accent-color[data-color="indigo"] { background-color: var(--accent-indigo); }
.accent-color[data-color="cyan"] { background-color: var(--accent-cyan); }
.accent-color[data-color="lime"] { background-color: var(--accent-lime); }
.accent-color[data-color="deep-orange"] { background-color: var(--accent-deep-orange); }

.md-switch {
  position: relative; display: inline-block; width: 52px;
  height: 32px; flex-shrink: 0;
}
.md-switch input { opacity: 0; width: 0; height: 0; }
.md-slider {
  position: absolute; inset: 0; background-color: var(--outline);
  border-radius: 16px; transition: background-color 0.25s ease-in-out;
}
.md-slider::before {
  position: absolute; content: ""; height: 24px; width: 24px;
  left: 4px; bottom: 4px; background-color: #fff;
  border-radius: 50%; box-shadow: var(--shadow-1);
  transition: transform 0.25s ease-in-out, background-color 0.25s ease-in-out;
}
.dark-theme .md-slider::before { background-color: var(--text-secondary); }
.md-slider::after {
  font-family: 'Material Symbols Outlined'; content: 'light_mode';
  position: absolute; font-size: 16px; color: var(--text-secondary);
  left: 8px; top: 8px;
  transition: transform 0.25s ease-in-out, color 0.25s ease-in-out; z-index: 1;
}
.dark-theme .md-slider::after { color: var(--surface-1); }
.md-switch input:checked + .md-slider { background-color: var(--primary); }
.md-switch input:checked + .md-slider::before {
  background-color: #fff; transform: translateX(20px);
}
.md-switch input:checked + .md-slider::after {
  content: 'dark_mode'; color: var(--primary); transform: translateX(20px);
}
.welcome-text { text-align: center; margin-top: 4rem; font-size: 1.1rem; color: var(--text-secondary); }
